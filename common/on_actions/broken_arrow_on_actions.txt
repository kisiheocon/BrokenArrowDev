on_actions = {
	on_startup = {
		effect = {
			SHI = { set_cosmetic_tag = SHI_ba_imperial_cosmetic_tag }
			EUR = { country_event = { id = erx_broken_arrow_navarro.1 days = 100 } }
			ERB = { country_event = { id = erx_broken_arrow.100 days = 15 } }
			TRL = { 
				set_technology = {
					fireteam_weaponry_tech = 1
					anti_tank_equipment_tech_1 = 1
				}
				set_cosmetic_tag = TRL_mutant_west_cosmetic_tag
				remove_country_leader_trait = tyrant_of_the_warren
				add_country_leader_trait = trl_ba_attis_of_the_west_country_leader_trait
				add_country_leader_trait = trl_ba_tyrant_of_mariposa_country_leader_trait
				set_country_leader_description = { desc = trl_ba_the_first_desc }
			}
			NEW = {
				annex_country = { target = TDN }
			}
			235 = {
				set_province_name = {
					id = 2158
					name = "Mariposa Military Base Ruins"
				}
			}
		}
	}
	on_peaceconference_ended = {
		effect = {
			if = {
				limit = { 
					original_tag = EUR 
					NOT = { has_country_flag = eur_defeated_ncref_flag }
					FOU = { all_core_land_owned_by_prev_sphere = yes }
					MXS = { all_core_land_owned_by_prev_sphere = yes }
				}
				set_country_flag = eur_defeated_ncref_flag
				country_event = erx_broken_arrow_navarro.16
			}
			if = {
				limit = {
					original_tag = TRL
					is_neighbor_of = KLA
				}
				complete_national_focus = trl_redriver
			}
			if = {
				limit = {
					OR = {
						original_tag = TRL
						original_tag = EUR
					}
					EUR = { is_neighbor_of = TRL }
				}
				EUR = { country_event = erx_broken_arrow_event_oregon.3 }
			}
			if = {
				limit = { original_tag = TRL }
				TRL = { 
					load_oob = "TRL_conquest_oob"
					add_manpower = 400
				}
			}
		}
	}
	on_capitulation = {
		effect = {
			if = {
				limit = {
					ROOT = { original_tag = UMB }
					FROM = { 
						original_tag = EUR
						NOT = { has_country_flag = EUR_UMB_defeated }
					}
				}
				ARR = {
					load_oob = "ARR_large_mobilisation_oob"
					add_manpower = 500
				}
				FROM = {
					set_country_flag = EUR_UMB_defeated
				}
			}
		}
	}
	on_state_control_changed = {
		effect = {
			###Oregon Military Department in Salem
			#Loses Salem - Oregon
			if = {
				limit = {
					FROM.FROM = { state = 493 } #Salem
					FROM = { 
						original_tag = EUR
						has_completed_focus = nf_ba_eur_oregon_military_department_formation
					}
				}
				FROM = {
					if = {
						limit = { has_completed_focus = nf_ba_eur_oregon_military_department_army_academy }
						if = {
							limit = { has_country_flag = eur_ba_oregon_guard_funded }
							remove_ideas = ba_EUR_oregon_military_department_army_guard_funding_real_hidden_idea
						}
						else = {
							remove_ideas = ba_EUR_oregon_military_department_army_guard_hidden_idea
							remove_ideas = ba_EUR_oregon_military_department_start_hidden_idea
						}
						remove_ideas = ba_EUR_oregon_military_department_army_academy_hidden_idea
					}
					else_if = {
						limit = { has_completed_focus = nf_ba_eur_oregon_military_department_army_guard }
						if = {
							limit = { has_country_flag = eur_ba_oregon_guard_funded }
							remove_ideas = ba_EUR_oregon_military_department_army_guard_funding_real_hidden_idea
						}
						else = {
							remove_ideas = ba_EUR_oregon_military_department_army_guard_hidden_idea
							remove_ideas = ba_EUR_oregon_military_department_start_hidden_idea
						}
					}
					else = {
						remove_ideas = ba_EUR_oregon_military_department_start_hidden_idea
					}
					if = {
						limit = { has_completed_focus = nf_ba_eur_oregon_military_department_naval_militia }
						remove_ideas = ba_EUR_oregon_military_department_naval_militia_hidden_idea
						remove_ideas = ba_EUR_oregon_military_department_civil_hidden_idea
					}
					else_if = {
						limit = { has_completed_focus = nf_ba_eur_oregon_military_department_civil_defense }
						remove_ideas = ba_EUR_oregon_military_department_civil_hidden_idea
					}
					if = {
						limit = { has_completed_focus = nf_ba_eur_oregon_military_department_air_academy }
						remove_ideas = ba_EUR_oregon_military_department_air_academy_hidden_idea
					}
				}
			}
			#Retook Salem - Oregon
			if = {
				limit = {
					FROM.FROM = { state = 493 } #Salem
					ROOT = { 
						original_tag = EUR
						has_completed_focus = nf_ba_eur_oregon_military_department_formation
					}
				}
				ROOT = {
					if = {
						limit = { has_completed_focus = nf_ba_eur_oregon_military_department_army_academy }
						if = {
							limit = { has_country_flag = eur_ba_oregon_guard_funded }
							add_ideas = ba_EUR_oregon_military_department_army_guard_funding_real_hidden_idea
						}
						else = {
							add_ideas = ba_EUR_oregon_military_department_army_guard_hidden_idea
							add_ideas = ba_EUR_oregon_military_department_start_hidden_idea
						}
						add_ideas = ba_EUR_oregon_military_department_army_academy_hidden_idea
					}
					else_if = {
						limit = { has_completed_focus = nf_ba_eur_oregon_military_department_army_guard }
						if = {
							limit = { has_country_flag = eur_ba_oregon_guard_funded }
							add_ideas = ba_EUR_oregon_military_department_army_guard_funding_real_hidden_idea
						}
						else = {
							add_ideas = ba_EUR_oregon_military_department_army_guard_hidden_idea
							add_ideas = ba_EUR_oregon_military_department_start_hidden_idea
						}
					}
					else = {
						add_ideas = ba_EUR_oregon_military_department_start_hidden_idea
					}
					if = {
						limit = { has_completed_focus = nf_ba_eur_oregon_military_department_naval_militia }
						add_ideas = ba_EUR_oregon_military_department_naval_militia_hidden_idea
						add_ideas = ba_EUR_oregon_military_department_civil_hidden_idea
					}
					else_if = {
						limit = { has_completed_focus = nf_ba_eur_oregon_military_department_civil_defense }
						add_ideas = ba_EUR_oregon_military_department_civil_hidden_idea
					}
					if = {
						limit = { has_completed_focus = nf_ba_eur_oregon_military_department_air_academy }
						add_ideas = ba_EUR_oregon_military_department_air_academy_hidden_idea
					}
				}
			}
		}
	}
	on_puppet = {
		effect = {
			if = {
				limit = { FROM = { original_tag = EUR } }
				FROM = { annex_country = { target = ROOT } }
			}
		}
	}
	on_release_as_puppet = {
		effect = {
			if = {
				limit = { FROM = { original_tag = EUR } }
				FROM = { annex_country = { target = ROOT } }
			}
		}
	}
}
